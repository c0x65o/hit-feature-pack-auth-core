version: 1

entities:
  org.location:
    meta:
      titleSingular: Location
      titlePlural: Locations
      descriptionPlural: Manage organizational locations
      routes:
        root: /admin
        list: /admin/org/locations
        new: /admin/org/locations/new
        detail: /admin/org/locations/{id}
        edit: /admin/org/locations/{id}/edit
      breadcrumbs:
        - { label: Admin, href: /admin }
        - { label: Locations, href: /admin/org/locations }
      actions:
        createLabel: Create Location
        editLabel: Edit Location
        saveCreateLabel: Create Location
        saveUpdateLabel: Update Location
        cancelLabel: Cancel
        deleteLabel: Delete
        deleteConfirmTitle: Delete Location
        deleteConfirmBody: Are you sure you want to delete "{name}"? This action cannot be undone.

    storage:
      drizzleTable: locations

    list:
      tableId: admin.org.locations
      platforms: [web, mobile]
      uiStateVersion: 1
      defaultVisibleOnly: true
      pageSize: 50
      initialSort:
        sortBy: createdAt
        sortOrder: desc
      sortWhitelist: [name, code, city, isActive, createdAt]
      initialColumnVisibility:
        name: true
        code: true
        locationTypeName: true
        city: true
        managerUserKey: false
        isPrimary: false
        isActive: true
        createdAt: false
      columns:
        - name
        - code
        - locationTypeName
        - city
        - managerUserKey
        - isPrimary
        - isActive
        - createdAt
        - key: actions
          label: ""
          sortable: false
          hideable: false
          align: right

    detail:
      summaryFields:
        - name
        - code
        - locationTypeName
        - city
        - managerUserKey
        - isPrimary
        - isActive
        - createdAt
        - updatedAt

    form:
      sections:
        - id: basic
          title: Basic
          layout: { columns: 2 }
          fields: [name, code, locationTypeId, managerUserKey, isPrimary, isActive, description]
        - id: address
          title: Address
          layout: { columns: 2 }
          fields: [address, city, state, postalCode, country]
        - id: hierarchy
          title: Hierarchy
          layout: { columns: 2 }
          fields: [parentId]

    fields:
      id: { type: text, label: ID, readOnly: true }
      name: { type: text, label: Name, required: true }
      code: { type: text, label: Code }
      description: { type: textarea, label: Description }
      address: { type: text, label: Address }
      city: { type: text, label: City }
      state: { type: text, label: State }
      postalCode: { type: text, label: Postal Code }
      country: { type: text, label: Country }
      parentId: { type: select, label: Parent Location, optionSource: org.locations }
      locationTypeId: { type: select, label: Location Type, optionSource: org.locationTypes }
      locationTypeName: { type: text, label: Location Type, readOnly: true, virtual: true }
      managerUserKey:
        type: reference
        label: Manager
        reference: { entityType: auth.user }
      isPrimary: { type: boolean, label: Primary/HQ }
      isActive: { type: boolean, label: Active }
      createdAt: { type: datetime, label: Created, readOnly: true }
      updatedAt: { type: datetime, label: Updated, readOnly: true }

