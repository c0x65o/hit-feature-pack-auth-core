version: 1

entities:
  org.userOrgAssignment:
    meta:
      titleSingular: Org Assignment
      titlePlural: Org Assignments
      descriptionPlural: Manage user organizational assignments
      routes:
        root: /admin
        list: /admin/org/assignments
        new: /admin/org/assignments/new
        detail: /admin/org/assignments/{id}
        edit: /admin/org/assignments/{id}/edit
      breadcrumbs:
        - { label: Admin, href: /admin }
        - { label: Org Assignments, href: /admin/org/assignments }
      actions:
        createLabel: Create Assignment
        editLabel: Edit Assignment
        saveCreateLabel: Create Assignment
        saveUpdateLabel: Update Assignment
        cancelLabel: Cancel
        deleteLabel: Delete
        deleteConfirmTitle: Delete Assignment
        deleteConfirmBody: Are you sure you want to delete this org assignment for "{userKey}"?

    storage:
      drizzleTable: userOrgAssignments

    list:
      tableId: admin.org.assignments
      platforms: [web, mobile]
      uiStateVersion: 1
      defaultVisibleOnly: true
      pageSize: 50
      initialSort:
        sortBy: createdAt
        sortOrder: desc
      sortWhitelist: [userKey, createdAt]
      initialColumnVisibility:
        userKey: true
        divisionName: true
        departmentName: true
        locationName: true
        createdAt: false
      columns:
        - userKey
        - divisionName
        - departmentName
        - locationName
        - createdAt
        - key: actions
          label: ""
          sortable: false
          hideable: false
          align: right

    detail:
      summaryFields:
        - userKey
        - divisionName
        - departmentName
        - locationName
        - createdAt
        - createdByUserKey

    form:
      sections:
        - id: assignment
          title: Assignment
          layout: { columns: 2 }
          fields: [userKey, divisionId, departmentId, locationId]

    fields:
      id: { type: text, label: ID, readOnly: true }
      userKey:
        type: reference
        label: User
        required: true
        reference: { entityType: auth.user }
      divisionId: { type: select, label: Division, optionSource: org.divisions }
      divisionName: { type: text, label: Division, readOnly: true, virtual: true }
      departmentId: { type: select, label: Department, optionSource: org.departments }
      departmentName: { type: text, label: Department, readOnly: true, virtual: true }
      locationId: { type: select, label: Location, optionSource: org.locations }
      locationName: { type: text, label: Location, readOnly: true, virtual: true }
      createdAt: { type: datetime, label: Created, readOnly: true }
      createdByUserKey:
        type: reference
        label: Created By
        readOnly: true
        reference: { entityType: auth.user }

