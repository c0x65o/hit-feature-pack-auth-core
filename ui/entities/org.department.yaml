version: 1

entities:
  org.department:
    meta:
      titleSingular: Department
      titlePlural: Departments
      descriptionPlural: Manage organizational departments
      routes:
        root: /admin
        list: /admin/org/departments
        new: /admin/org/departments/new
        detail: /admin/org/departments/{id}
        edit: /admin/org/departments/{id}/edit
      breadcrumbs:
        - { label: Admin, href: /admin }
        - { label: Departments, href: /admin/org/departments }
      actions:
        createLabel: Create Department
        editLabel: Edit Department
        saveCreateLabel: Create Department
        saveUpdateLabel: Update Department
        cancelLabel: Cancel
        deleteLabel: Delete
        deleteConfirmTitle: Delete Department
        deleteConfirmBody: Are you sure you want to delete "{name}"? This action cannot be undone.

    storage:
      drizzleTable: departments

    list:
      tableId: admin.org.departments
      platforms: [web]
      uiStateVersion: 1
      defaultVisibleOnly: true
      pageSize: 50
      initialSort:
        sortBy: createdAt
        sortOrder: desc
      sortWhitelist: [name, code, isActive, createdAt]
      initialColumnVisibility:
        name: true
        code: true
        divisionName: true
        managerUserKey: false
        isActive: true
        createdAt: false
      columns:
        - name
        - code
        - divisionName
        - managerUserKey
        - isActive
        - createdAt
        - key: actions
          label: ""
          sortable: false
          hideable: false
          align: right

    detail:
      summaryFields:
        - name
        - code
        - divisionName
        - managerUserKey
        - isActive
        - createdAt
        - updatedAt

    form:
      sections:
        - id: basic
          title: Basic
          layout: { columns: 2 }
          fields: [name, code, divisionId, managerUserKey, isActive, parentId, description]

    fields:
      id: { type: text, label: ID, readOnly: true }
      name: { type: text, label: Name, required: true }
      code: { type: text, label: Code }
      description: { type: textarea, label: Description }
      divisionId: { type: select, label: Division, optionSource: org.divisions }
      divisionName: { type: text, label: Division, readOnly: true, virtual: true }
      parentId: { type: select, label: Parent Department, optionSource: org.departments }
      managerUserKey:
        type: reference
        label: Manager
        reference: { entityType: auth.user }
      isActive: { type: boolean, label: Active }
      createdAt: { type: datetime, label: Created, readOnly: true }
      updatedAt: { type: datetime, label: Updated, readOnly: true }
